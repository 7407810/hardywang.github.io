<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <title>{{ site.title }} | {{site.affiliation}}</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{ site.description }}">
    {% if site.keywords %}
    <meta name="keywords" content="{{ site.keywords }}">
    {% endif %}
    {% if site.canonical %}
    <link rel="canonical" href="{{ site.canonical }}"/>
    {% endif %}

    <link rel="icon" media="(prefers-color-scheme:dark)" href="{{ site.favicon_dark }}" type="image/png" />
    <link rel="icon" media="(prefers-color-scheme:light)" href="{{ site.favicon }}" type="image/png" />
    <script src="./assets/js/favicon-switcher.js" type="application/javascript"></script>

    <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous>
    <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin=anonymous>

    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/publications.css">
    
    <!-- Live2D Widget -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/dist/L2Dwidget.min.css">
    
    <script type="text/javascript">
      function toggle_vis(id) {
          var e = document.getElementById(id);
          if (e.style.display == 'none')
              e.style.display = 'inline';
          else
              e.style.display = 'none';
      }

      // Language switch functionality with toggle
      document.addEventListener('DOMContentLoaded', function() {
          const languageSwitch = document.getElementById('language-switch');
          const darkModeSwitch = document.getElementById('dark-mode-switch');
          const currentPath = window.location.pathname;
          
          // Set initial language switch state
          if (currentPath.includes('index.zh.html')) {
              languageSwitch.checked = true;
          }
          
          // Set initial dark mode state from localStorage
          const isDarkMode = localStorage.getItem('darkMode') === 'true';
          if (isDarkMode) {
              darkModeSwitch.checked = true;
              document.body.classList.add('dark-mode');
          }
          
          // Update color description text based on dark mode
          function updateColorDescription() {
              const isDark = document.body.classList.contains('dark-mode');
              const isChinese = currentPath.includes('index.zh.html');
              const colorDescriptions = document.querySelectorAll('.color-description');
              
              colorDescriptions.forEach(function(element) {
                  if (isDark) {
                      element.textContent = isChinese ? '橙色' : 'Orange';
                  } else {
                      element.textContent = isChinese ? '红色' : 'Red';
                  }
              });
          }
          
          // Update color description on initial load
          updateColorDescription();
          
          // Language switch event
          languageSwitch.addEventListener('change', function() {
              if (this.checked) {
                  window.location.href = './index.zh.html';
              } else {
                  window.location.href = './index.html';
              }
          });
          
          // Dark mode switch event
          darkModeSwitch.addEventListener('change', function() {
              document.body.classList.toggle('dark-mode');
              localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
              updateColorDescription();
          });
      });
   </script>

  </head>
  <body>
    
    <lightonly>
      <div id="headcolor">
        <div id="colorheadspacer"></div>
      </div>
    </lightonly>

    <script src="./assets/js/back-to-top.js"></script>
    <script>addBackToTop({
        backgroundColor: '#fff',
        innerHTML: 'Back to Top',
        textColor: '#333'
      })
    </script><div id="back-to-top" class="hidden">Back to Top</div>
    <style>
        #back-to-top {
          border: 1px solid #ccc;
          border-radius: 0;
          font-size: 12px;
          width: 80px;
          text-align: center;
          line-height: 30px;
          height: 30px;
        }
        
        /* Top-right controls */
        .top-controls {
          position: fixed;
          top: 80px;
          right: 20px;
          z-index: 1000;
          display: flex;
          flex-direction: column;
          gap: 10px;
        }
        
        /* Switch styles */
        .switch-container {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 14px;
          color: #333;
        }
        
        .switch {
          position: relative;
          display: inline-block;
          width: 40px;
          height: 20px;
        }
        
        .switch input {
          opacity: 0;
          width: 0;
          height: 0;
        }
        
        .slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          transition: .4s;
          border-radius: 20px;
        }
        
        .slider:before {
          position: absolute;
          content: "";
          height: 16px;
          width: 16px;
          left: 2px;
          bottom: 2px;
          background-color: white;
          transition: .4s;
          border-radius: 50%;
        }
        
        input:checked + .slider {
          background-color: #4CAF50;
        }
        
        input:focus + .slider {
          box-shadow: 0 0 1px #4CAF50;
        }
        
        input:checked + .slider:before {
          transform: translateX(20px);
        }
        
        /* Dark mode styles */
        body.dark-mode {
          background-color: #121212;
          color: #e0e0e0;
        }
        
        body.dark-mode .wrapper {
          background-color: #1e1e1e;
          border-color: #333;
        }
        
        body.dark-mode h1,
        body.dark-mode h2,
        body.dark-mode h3,
        body.dark-mode h4,
        body.dark-mode h5,
        body.dark-mode h6 {
          color: #3DABFF;
        }
        
        body.dark-mode a {
          color: #3DABFF;
        }
        
        body.dark-mode a:hover {
          color: #5DC0FF;
        }
        
        body.dark-mode .badge {
          background-color: #3DABFF;
          color: #121212;
        }
        
        body.dark-mode b {
          color: #3DABFF;
        }
        
        body.dark-mode .author b {
          color: #FFA04D !important;
        }
        
        body.dark-mode .publications b[style*="#a82e26"] {
          color: #FFA04D !important;
        }
        
        body.dark-mode .title {
          color: #e0e0e0;
        }
        
        body.dark-mode .periodical {
          color: #b0b0b0;
        }
        
        body.dark-mode .switch-container span {
          color: #e0e0e0;
        }
        
        body.dark-mode .fas {
          color: #3DABFF;
        }
        
        body.dark-mode .slider {
          background-color: #555555;
        }
        
        body.dark-mode input:checked + .slider {
          background-color: #3DABFF;
        }
        
        body.dark-mode strong {
          color: #00E6F6;
        }
        
        /* Mobile-specific styles */
        @media (max-width: 768px) {
          body:not(.dark-mode) #headcolor {
            background: #ffffff;
            color: #333;
          }
        }
    </style>

    <!-- Top-right controls -->
    <div class="top-controls">
      <!-- Language switch -->
      <div class="switch-container">
        <span>EN</span>
        <label class="switch">
          <input type="checkbox" id="language-switch">
          <span class="slider"></span>
        </label>
        <span>中文</span>
      </div>
      
      <!-- Dark mode switch -->
      <div class="switch-container">
        <i class="fas fa-sun"></i>
        <label class="switch">
          <input type="checkbox" id="dark-mode-switch">
          <span class="slider"></span>
        </label>
        <i class="fas fa-moon"></i>
      </div>
    </div>

    <div class="wrapper">
      <header>
        
        {% if site.avatar %}
        <a class="image avatar"><img src="{{ site.avatar }}" alt="avatar" /></a>
        {% endif %}

        <h1>{{ site.title }}</h1>
        
        {% if site.titlecn %}
        <position style="font-size:1.5rem; color:#036; font-family:STKaiti;"><b>{{ site.titlecn }}</b></position>
        <br>
        {% endif %}

        {% if site.position %}
        <position style="font-size:1.10rem;">{{ site.position }}</position>
        <br>
        {% endif %}
        {% if site.affiliation %}
        <a href="{{ site.affiliation_link }}" rel="noopener"><autocolor>{{ site.affiliation }}</autocolor></a>
        <br>
        {% endif %}
        {% if site.email %}
        <email>{{ site.email }}</email>
        {% endif %}

        <br>
        <br>
        <div class="social-icons">
        {% if site.cv_link %}
        <a style="margin: 0 0 0 0" href="{{ site.cv_link }}" target="_blank">
          <i class="ai ai-cv" style="font-size:1.3rem;"></i>
        </a>
        {% endif %}

        {% if site.google_scholar %}
        <a style="margin: 0 0 0 0" href="{{ site.google_scholar }}" target="_blank">
          <i class="ai ai-google-scholar" style="font-size:1.3rem"></i>
        </a>
        {% endif %}

        {% if site.github_link %}
        <a style="margin: 0 0 0 0" href="{{ site.github_link }}" target="_blank">
          <i class="fab fa-github" style="font-size:1.3rem;"></i>
        </a>
        {% endif %}

        <br>

        {% if site.dblp %}
        <a style="margin: 0 0 0 0" href="{{ site.dblp }}" target="_blank">
          <i class="ai ai-dblp ai-fw" style="font-size:1.3rem;"></i>
        </a>
        {% endif %}

        {% if site.orcid %}
        <a style="margin: 0 0 0 0" href="{{ site.orcid }}" target="_blank">
          <i class="ai ai-orcid-square ai-fw" style="font-size:1.3rem;"></i>
        </a>
        {% endif %}

        {% if site.linkedin %}
        <a style="margin: 0 0 0 0" href="{{ site.linkedin }}" target="_blank">
          <i class="fab fa-linkedin" style="font-size:1.3rem;"></i>
        </a>
        {% endif %}

        {% if site.twitter %}
        <a style="margin: 0 0 0 0" href="{{ site.twitter }}" target="_blank">
          <i class="fab fa-twitter" style="font-size:1.3rem;"></i>
        </a>
        {% endif %}
        </div>
        <br>

      </header>
      <section>

      {{ content }}

      <br>

      {% if site.enable_footnote %}
      <p><small>Powered by Jekyll and <a href="https://github.com/yaoyao-liu/minimal-light" target="_blank" rel="noopener">Minimal Light</a> theme.</small></p>
      {% endif %}

      </section>
      <footer>
        Yesterday is history,<br>
        Tomorrow is a mystery,<br>
        Today is a gift.<br>
        That's why we call it the present.
      </footer>
    </div>
    <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>
    {% if site.google_analytics %}
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', '{{ site.google_analytics }}', 'auto');
      ga('send', 'pageview');
    </script>
    {% endif %}
  <!-- Live2D Widget -->
  <script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.1.4/dist/L2Dwidget.min.js"></script>
  <script>
    L2Dwidget.init({
      model: {
        jsonPath: 'https://cdn.jsdelivr.net/npm/live2d-widget-model-shizuku@1.0.5/assets/shizuku.model.json',
        scale: 1,
      },
      display: {
        position: 'right',
        width: 150,
        height: 300,
        hOffset: 0,
        vOffset: -20,
      },
      mobile: {
        show: true,
        scale: 0.5,
      },
      react: {
        opacityDefault: 0.8,
        opacityOnHover: 0.2,
      },
    });
  </script>
  
  </body>
</html>
